<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ambientes Domiciliários</title>
    <link rel = "stylesheet" href = "style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=BioRhyme:wght@200;300;400;700;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet"> 
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="shortcut icon" href="#">
    <script src = "main.js" defer></script>
</head>
<body>
    <header class = "header">
        <div class = "hamb-menu">
            <div class = "hamb-lines"></div>
        </div>
        <h2><a href = "index.html">Ambientes Domiciliários</a></h2>
        <nav>
            <ul class = "menu-items">
                <li><a href = "mapa.html" class = "menu-item" > Mapa Geral </a></li> 
                <li><a href = "dados.html" class = "menu-item" > Dados em Tempo Real </a></li> 
                <li><a href = "historico.html" class = "menu-item" > Histórico </a></li> 
            </ul>
        </nav>
    </header>
    <section class = "section hero-section">
        <div id = "container" class = "svg-container"></div>
        <script type = "text/javascript">
            var svg = d3
                .select(".svg-container")
                .append("svg")
                .attr("preserveAspectRatio", "xMinYMin meet")
                .style("background-color","#eeeeee")
                .style("fill","#05203d")
                .attr("viewBox", "0 0 200 200")
                .classed("svg-content", true);

            var projection = d3.geoMercator().translate([1350, 120]).scale(9500).center([0, 40]);
            var path = d3.geoPath().projection(projection);

            var map = d3.json("fundao.geojson");

            var cidades = d3.csv("cities.csv");

            Promise.all([map, cidades]).then(function(values){    
        // draw map
            svg.selectAll("path")
                .data(values[0].features)
                .enter()
                .append("path")
                .attr("class","continent")
                .attr("d", path),
        // draw points
            svg.selectAll("circle")
                .data(values[1])
                .enter()
                .append("circle")
                .attr("class","circles")
                .attr("cx", function(d) {return projection([d.Longitude, d.Lattitude])[0];})
                .attr("cy", function(d) {return projection([d.Longitude, d.Lattitude])[1];})
                .attr("r", "1px");
            });
        </script>
    </section>
</body>
</html>